---
title: "Perlindungan Linux Server Dengan Linux Malware Detect"
date: 2021-09-03T09:53:31+08:00
draft: false
toc: false
backtotop: true
tags:
- "linux"
- "server"
images:
- "https://imgur.com/4EeH9Oz.jpg"
---

Hallo hallo, selamat datang bulan september. Mari kita awali bulan ini dan kita akhiri minggu ini dengan sebuah tulisan di blog ini, yang mana minggu lalu saya tidak posting karenakan sendang mempersiapkan dan sedang fokus dengan ujian EX180 nya Red Hat. Alhamdulillah hasilnya memuaskan muehehe :grin: :grin: :grin:. Saya tidak akan bercerita tentang itu dikarenakan memang juga bingung mau cerita apaan :laughing:. Jadi ceritanya beberapa waktu lalu ada yang minta pasang anti virus di servernya. Karena saya juga belum pernah melakukan hal tersebut akhirnya saya mencoba untuk memasang anti virus deh, disini saya coba pakai Linux Malware Detect (LMD) atau bisa juga disebut dengan Maldet, berikut beberapa kelebihan dari Maldet sendiri

## Kelebihan

- Mudah untuk dipasang
- Terintegrasi dengan ClamAV
- Support Realtime Protection

Nah, sebenarnya yang menjadi pertanyaan itu apakah kita perlu memasang anti virus di server linux kita? Kalau menurut saya pribadi sih perlu jika:

1. Server akan digunakan untuk konsumsi public yang sangat luas,
2. Server berisikan konten yang sangat-sangat berharga,
3. Ingin mendapatkan sertifikasi server,
4. Mematuhi aturan,
5. Emang pingin strict aja

## Memulai Pemasangan

### Spesifikasi Server

Berikut ini adalah spesifikasi server yang saya gunakan kali ini

- 1 vCPU
- 1 GB Memory
- 20 GB Disk
- Ubuntu 20.04

### Menginstall Maldet

- Login ke server seperti biasa lah
- Download maldet dengan perintah

```bash
curl -O http://www.rfxn.com/downloads/maldetect-current.tar.gz
```

- Extract hasil download

```bash
tar xzvf maldetect-current.tar.gz
```

- Masuk kedalam direktori hasil extract maldet tadi, untuk versi silahkan disesuaikan sendiri

```bash
cd maldetect-1.6.4
```

- Jalankan script instalasi

```bash
sudo ./install.sh
```

![](https://imgur.com/6DYYG8n.jpg)

- Setelah instalasi selesai, coba jalankan service maldet dengan perintah

```bash
sudo systemctl enable --now maldet
```

![](https://imgur.com/RvqQ1Ux.jpg)

- Jika terdapat error seperti itu, maka kita harus memperbaikinya. Pertama-tama coba dicek dulu errornya kenapa? Gunakan perintah

```bash
sudo systemctl status maldet
```

![](https://imgur.com/NjEL1Fq.jpg)

- Dari situ kita bisa melihat bahwa error diakibatkan oleh `inotify-tools` belum terpasang, jadi kita perlu memasangnya terlebih dahulu. Karena saya menggunakan ubuntu saya akan menggunakan perintah berikut

```bash
sudo apt update
sudo apt install inotify-tools
```

![](https://imgur.com/I9rMUac.jpg)

- Setelah terinstall coba jalankan lagi. Seharusnya sih sukses ya

![](https://imgur.com/xNkglqU.jpg)

Di sini sebenarnya maldet sudah jalan dan siap digunakan namun karena kita belum atur apa-apa maldet masih tidak berguna. Maka dari itu kita perlu atur-atur tipis lah

### Mengaktifkan Real-time Protection

Untuk mengaktifkan real-time protection di maldet, kita perlu atur tipis-tipis pada konfigurasi maldet yang berada di file `/usr/local/maldetect/conf.maldet`. Cari bagian `default_monitor_mode="users"` dan disable konfigurasi tersebut. Sebagai gantinya aktifkan yang bagian `default_monitor_mode="/usr/local/maldetect/monitor_paths"`. Selanjutnya buat file dengan nama `/usr/local/maldetect/monitor_paths` yang berisikan path direktori yang hendak di monitoring.

```bash
sudo vim /usr/local/maldetect/monitor_paths
```

Setelah itu simpan file tersebut, dan restart maldet service

```bash
sudo systemctl restart maldet
```

![](https://imgur.com/E4KadD4.jpg)

### Mengaktifkan Auto Karantina

Sampai sini maldet hanya mendeteksi malwarenya saja dan mengirimkan peringatan. Kita bisa membuat agar maldet memindahkan virus ke karantina apabila terdetaksi. Untuk membuatnya kita perlu melakukan konfigurasi tipis-tipis yang berada pada direktori `sudo vim /usr/local/maldetect/conf.maldet`. Cari bagian `quarantine_hits` dan ubah nilainya menjadi `1`. Setelah itu simpan dan restart maldet

```bash
sudo vim /usr/local/maldetect/conf.maldet
sudo systemctl restart maldet
```

###

## Menguji Maldet

Setelah kita melakukan banyak hal tentunya kita perlu memastikan bahwa maldet yang sudah kita pasang dapat bekerja. Untuk itu kita perlu mengujinya. Untuk mengujinya sebenarnya mudah saya, kita tinggal download contoh malware yang ada kemudian masukan ke server. Nantinya server akan mendeteksinya dan mengkarantinanya. Pada kasus saya karena folder yang di monitoring adalah `/home/kudaliar/rahasia` maka saya akan mendownload malware ke direktori tersebut.

```bash
cd /home/kudaliar/rahasia
curl -O http://www.eicar.org/download/eicar.com.txt
ls
# tunggu beberapa saat hingga kira-kira file sudah terdeteksi sebagai malware
ls
```

![](https://imgur.com/l2dO5Nj.jpg)

Jika file `eicar.com.txt` yang diunduh menghilang setelah beberapa saat, itu berarti semua berjalan dengan benar dan selamat anda sukses.

Mungkin sampai sini saja catatan saya kali ini, semoga bisa bermanfaat untuk kita semua. See uuu terima kasih :pray: :pray: :pray:
